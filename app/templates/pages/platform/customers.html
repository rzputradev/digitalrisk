{% extends 'layouts/platform.html' %} {% block title %}Dashboard{% endblock %} {% block main %}

<!-- User information -->
{% include 'components/create-customer-modal.html' %}
<section class="w-full lg:p-4 lg:pt-8 p-2 justify-center bg-secondary/80 space-y-4">
   <!-- Header -->
   <div class="flex justify-between items-center px-2">
      <span class="text-2xl font-normal line-clamp-1">Customer Data</span>

      <div class="flex items-center divide-x-2">
         <form class="flex items-center">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               width="24"
               height="24"
               viewBox="0 0 24 24"
               fill="none"
               stroke="currentColor"
               stroke-width="2"
               stroke-linecap="round"
               stroke-linejoin="round"
               class="feather feather-search text-mutedForeground size-5"
            >
               <circle cx="11" cy="11" r="8"></circle>
               <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input
               type="text"
               id="search"
               name="search"
               class="max-w-48 pl-2 rounded-md focus:outline-none bg-inherit"
               placeholder="Search customer..."
            />
         </form>
         <div class="pl-4 flex divide-mutedForeground gap-x-1 text-mutedForeground font-semibold items-center">
            <a
               href="{{ url_for('platform.customer.index', data='all') }}"
               class="px-2 py-1 rounded-sm {% if request.args.get('data') == 'all' or request.args.get('search')%} font-semibold bg-secondaryForeground/10 {% endif %}"
            >
               All
            </a>
            <a
               href="{{ url_for('platform.customer.index', data='user') }}"
               class="px-2 py-1 rounded-sm {% if request.args.get('data') == 'user' %} font-semibold bg-secondaryForeground/10 {% endif %}"
            >
               Mine
            </a>
         </div>
      </div>
   </div>

   <!-- Flash Messages -->
   <div class="w-full text-left items-center">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in
      messages %}
      <div
         class="flex items-center justify-between p-4 rounded-md {% if category == 'customer-create-success' %}bg-green-100 text-green-700 border-green-300 {% elif category == 'customer-create-error' %}bg-red-100 text-red-700 border-red-300 {% else %}bg-gray-100 text-gray-700 border-gray-300 {% endif %} border-l-4"
      >
         <p>{{ message }}</p>
         <button class="flash-close-button">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               width="24"
               height="24"
               viewBox="0 0 24 24"
               fill="none"
               stroke="currentColor"
               stroke-width="2"
               stroke-linecap="round"
               stroke-linejoin="round"
               class="feather feather-x size-4 text-primary"
            >
               <line x1="18" y1="6" x2="6" y2="18"></line>
               <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
         </button>
      </div>
      {% endfor %} {% endif %} {% endwith %}
   </div>

   <!-- Content -->
   <div class="w-full h-full rounded-md bg-background shadow-sm overflow-y-auto">
      <!-- Header -->
      <div class="flex items-center justify-between py-6 px-8">
         <!-- Left -->
         <div class="flex items-center gap-x-2">
            <span class="text-lg font-semibold text-primary/90">Attributes</span>
            <span class="text-mutedForeground">{{ pagination.total }}</span>
         </div>
         <!-- Right -->
         <div>
            <button id="openModalButton" class="text-sm p-2 rounded-md bg-primary/90 hover:bg-primary">
               <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="feather feather-user-plus size-6 text-secondary"
               >
                  <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="8.5" cy="7" r="4"></circle>
                  <line x1="20" y1="8" x2="20" y2="14"></line>
                  <line x1="23" y1="11" x2="17" y2="11"></line>
               </svg>
            </button>
         </div>
      </div>
      <!-- Table -->
      <div class="px-8">
         <table class="table-auto w-full border-collapse">
            <!-- Rest of your table content -->
            <thead class="text-left">
               <tr>
                  <th class="px-4 py-2">Customer Type</th>
                  <th class="px-4 py-2">Name</th>
                  <th class="px-4 py-2">Phone Number</th>
                  <th class="px-4 py-2">ID Number</th>
                  <th class="px-4 py-2">Actions</th>
               </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
               {% for customer in customers %}
               <tr>
                  <td class="px-4 py-3 text-left">{{ customer.customer_type.value }}</td>
                  <td class="px-4 py-3">{{ customer.name }}</td>
                  <td class="px-4 py-3">{{ customer.phone_number }}</td>
                  <td class="px-4 py-3">{{ customer.id_no }}</td>
                  <td class="px-4 py-3">Preview</td>
               </tr>
               {% endfor %}
            </tbody>
         </table>
      </div>
      <!-- Pagination -->
      <div class="flex items-center justify-between px-8 py-4">
         <div>
            <span class="text-sm text-mutedForeground">Page {{ pagination.page }} of {{ pagination.pages }}</span>
         </div>
         <div>
            <nav class="block">
               <ul class="flex pl-0 rounded list-none flex-wrap">
                  {% if pagination.has_prev %}
                  <li>
                     <a
                        href="?page={{ pagination.prev_num }}"
                        class="relative block py-2 px-3 leading-tight bg-white border rounded-sm border-gray-300 text-primary/90 hover:bg-gray-200"
                     >
                        Previous
                     </a>
                  </li>
                  {% endif %} {% if pagination.has_next %}
                  <li>
                     <a
                        href="?page={{ pagination.next_num }}"
                        class="relative block py-2 px-3 leading-tight bg-white border rounded-sm border-gray-300 text-primary/90 hover:bg-gray-200"
                     >
                        Next
                     </a>
                  </li>
                  {% endif %}
               </ul>
            </nav>
         </div>
      </div>
   </div>
</section>
<script>
   document.addEventListener("DOMContentLoaded", function () {
      // Close flash messages
      document.querySelectorAll(".flash-close-button").forEach((button) => {
         button.addEventListener("click", function () {
            this.parentElement.style.display = "none";
         });
      });
   });
</script>

{% endblock main%}
